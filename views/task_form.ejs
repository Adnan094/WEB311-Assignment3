<h2><%= task ? 'Edit Task' : 'Add New Task' %></h2>

<% if (error) { %>
  <p class="error"><%= error %></p>
<% } %>

<form action="<%= action %>" method="POST">
  <label>Title</label>
  <input type="text" name="title" required value="<%= task ? task.title : '' %>">

  <label>Description</label>
  <textarea name="description"><%= task ? task.description : '' %></textarea>

  <label>Due Date</label>
  <input type="date" name="dueDate" value="<%= task && task.dueDate ? (new Date(task.dueDate)).toISOString().split('T')[0] : '' %>">

  <label>Status</label>
  <select name="status">
    <option value="pending" <%= task && task.status === 'pending' ? 'selected' : '' %>>Pending</option>
    <option value="completed" <%= task && task.status === 'completed' ? 'selected' : '' %>>Completed</option>
  </select>

  <button type="submit"><%= task ? 'Update Task' : 'Add Task' %></button>
</form>

<p><a href="/tasks">Back to tasks</a></p>
